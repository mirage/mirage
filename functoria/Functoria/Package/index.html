<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Package (functoria.Functoria.Package)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">functoria</a> &#x00BB; <a href="../index.html">Functoria</a> &#x00BB; Package</nav><header class="odoc-preamble"><h1>Module <code><span>Functoria.Package</span></code></h1><p>Representation of opam packages.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-scope"><a href="#type-scope" class="anchor"></a><code><span><span class="keyword">type</span> scope</span><span> = </span><span>[ </span></code><ol><li id="type-scope.Switch" class="def constructor anchored"><a href="#type-scope.Switch" class="anchor"></a><code><span>| </span></code><code><span>`Switch</span></code></li><li id="type-scope.Monorepo" class="def constructor anchored"><a href="#type-scope.Monorepo" class="anchor"></a><code><span>| </span></code><code><span>`Monorepo</span></code></li></ol><code><span> ]</span></code></div><div class="spec-doc"><p>The scope of package installation:</p><ul><li>Switch: installed with opam.</li><li>Monorepo: locally fetched along unikernel sources.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>The type for opam packages.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v"><a href="#val-v" class="anchor"></a><code><span><span class="keyword">val</span> v : 
  <span>?scope:<a href="#type-scope">scope</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?build:bool <span class="arrow">&#45;&gt;</span></span>
  <span>?sublibs:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?libs:<span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>?min:string <span class="arrow">&#45;&gt;</span></span>
  <span>?max:string <span class="arrow">&#45;&gt;</span></span>
  <span>?pin:string <span class="arrow">&#45;&gt;</span></span>
  <span>?pin_version:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>v ~scope ~build ~sublibs ~libs ~min ~max ~pin opam</code> is a <code>package</code>. <code>Build</code> indicates a build-time dependency only, defaults to <code>false</code>. The library name is by default the same as <code>opam</code>, you can specify <code>~sublibs</code> to add additional sublibraries (e.g. <code>~sublibs:[&quot;mirage&quot;] &quot;foo&quot;</code> will result in the library names <code>[&quot;foo&quot;; &quot;foo.mirage&quot;]</code>. In case the library name is disjoint (or empty), use <code>~libs</code>. Specifying both <code>~libs</code> and <code>~sublibs</code> leads to an invalid argument. Version constraints are given as <code>min</code> (inclusive) and <code>max</code> (exclusive). If <code>pin</code> is provided, a <a href="https://opam.ocaml.org/doc/Manual.html#opamfield-pin-depends">pin-depends</a> is generated, <code>pin_version</code> is <code>&quot;dev&quot;</code> by default. <code>~scope</code> specifies the installation location of the package.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_scope"><a href="#val-with_scope" class="anchor"></a><code><span><span class="keyword">val</span> with_scope : <span>scope:<a href="#type-scope">scope</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>with_scope t</code> returns t with chosen installation location.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-name"><a href="#val-name" class="anchor"></a><code><span><span class="keyword">val</span> name : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>name t</code> is <code>t</code>'s opam name.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-key"><a href="#val-key" class="anchor"></a><code><span><span class="keyword">val</span> key : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>key t</code> is <code>t</code>'s key (concatenation of name and installation scope).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scope"><a href="#val-scope" class="anchor"></a><code><span><span class="keyword">val</span> scope : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-scope">scope</a></span></code></div><div class="spec-doc"><p><code>scope t</code> is <code>t</code>'s installation scope.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pin"><a href="#val-pin" class="anchor"></a><code><span><span class="keyword">val</span> pin : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(string * string)</span> option</span></span></code></div><div class="spec-doc"><p><code>pin t</code> is <code>Some (name_version, r)</code> iff <code>t</code> is pinned to the repository <code>r</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-build_dependency"><a href="#val-build_dependency" class="anchor"></a><code><span><span class="keyword">val</span> build_dependency : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>build_dependency t</code> is <code>true</code> iff <code>t</code> is a build-time dependency.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-libraries"><a href="#val-libraries" class="anchor"></a><code><span><span class="keyword">val</span> libraries : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>libraries t</code> is the set of libraries (and sub-libraries) used in the package <code>t</code>. For most packages, it will only contain one library whose name is <code>name t</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_versions"><a href="#val-max_versions" class="anchor"></a><code><span><span class="keyword">val</span> max_versions : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>max_versions</code> is the set of maximum versions of <code>t</code> which are required.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-min_versions"><a href="#val-min_versions" class="anchor"></a><code><span><span class="keyword">val</span> min_versions : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>min_versions</code> is the set minimum versions of <code>t</code> which are required.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span><span class="keyword">val</span> merge : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div><div class="spec-doc"><p><code>merge x y</code> is merges the information of <code>x</code> and <code>y</code>. The result is <code>None</code> if <code>name x != name y</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span>?surround:string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="xref-unresolved">Fmt</span>.t</span></span></code></div><div class="spec-doc"><p><code>pp</code> is the pretty-printer for packages.</p></div></div></div></body></html>